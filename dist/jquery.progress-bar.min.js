/*
* progressBar - jQuery plugin for progress bar ui widget
*
* Version: 0.0.1
* Build: 30
* Copyright 2011 Alex Tkachev
*
* Dual licensed under MIT or GPLv2 licenses
*   http://en.wikipedia.org/wiki/MIT_License
*   http://en.wikipedia.org/wiki/GNU_General_Public_License
*
* Date: 17 Dec 2011 14:31:01
*/

(function(a){function d(a){var b=[];for(var c in a)b.push({from:parseInt(c,10),css:a[c]});b.sort(function(a,b){a=a.from,b=b.from;return a<b?-1:a===b?0:1});for(var d=1;d<b.length;d++){var e=b[d-1];e.to=b[d].from-1}b[b.length-1].to=100;return b}function c(b){var c=a('<div class="progress-bar-container"><div class="bar"/><div class="percent"/></div>');b.html(c);return c}var b=function(){this.initialize.apply(this,arguments)};a.extend(b.prototype,{initialize:function(a,b){this.rtl=a.css("direction")=="rtl",this.el=c(a).toggleClass("rtl",this.rtl),this.cssRange=d(b.cssRange),this._total=b.total,this._value=b.start,this.syncUI()},value:function(a){var b=this._value;if(arguments.length===0)return b;this._value=a%(this._total+1),this.syncUI();return this},total:function(a){var b=this._total;if(arguments.length===0)return b;this._total=a,this.value(this.value());return this},syncUI:function(){var b=Math.round(this.value()/this.total()*100);jQuery.isNumeric(b)||(b=0);var c=this.el.height(),d=this.el.width(),e=Math.round(b/100*d);a(".bar",this.el).width(e).height(c);var f=a(".percent",this.el);f.html(b+"%").height(c).css({"line-height":c+"px"});var g=e-f.outerWidth(!0);g<0&&(g=0),f.css(this.rtl?{right:g+"px"}:{left:g+"px"});for(var h=0;h<this.cssRange.length;h++){var i=this.cssRange[h];this.el.toggleClass(i.css,i.to>=b&&i.from<=b)}this.el.toggleClass("tooSmallForRoundedCorners",e>0&&e<15)}}),a.fn.progressBar=function(c){return c=="api"?this.data("api"):this.each(function(){var d=a(this);a.type(c)==="object"&&d.data("api",new b(d,a.extend({},a.fn.progressBar.defaults,c||{})))})},a.fn.progressBar.defaults={start:0,total:100,cssRange:{0:"red",30:"orange",75:"green"}},a().jquery<"1.7"&&(a.isNumeric=function(){return!a.isNaN.apply(a,arguments)})})(jQuery)
